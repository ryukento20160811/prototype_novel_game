// ===========================
// STORY DATA
// ===========================
// ãƒŽãƒ™ãƒ«ã‚²ãƒ¼ãƒ ã®ã‚·ãƒŠãƒªã‚ªãƒ‡ãƒ¼ã‚¿
// ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚’ã‚«ã‚¹ã‚¿ãƒžã‚¤ã‚º

const CHARACTERS = {
  player: { name: "ã‚ãªãŸ", color: "#a8d8ea" },
  haruka: { name: "ä¼Šè—¤ é¥", color: "#f9c9b6", role: "å…ˆè¼©ï¼ˆãƒžãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°éƒ¨ï¼‰" },
  kenji: { name: "ç”°ä¸­ è³¢äºŒ", color: "#b8d8b8", role: "åŒåƒšï¼ˆå–¶æ¥­éƒ¨ï¼‰" },
  boss: { name: "éƒ¨é•·", color: "#d4a5c9", role: "å–¶æ¥­éƒ¨é•·" },
  narrator: { name: "", color: "#cccccc" },
};

// èƒŒæ™¯å®šç¾©
const BACKGROUNDS = {
  office_day:   { label: "ã‚ªãƒ•ã‚£ã‚¹ï¼ˆæ˜¼ï¼‰",   gradient: "linear-gradient(160deg, #1a1a2e 0%, #16213e 40%, #0f3460 100%)" },
  office_night: { label: "ã‚ªãƒ•ã‚£ã‚¹ï¼ˆæ·±å¤œï¼‰", gradient: "linear-gradient(160deg, #0d0d1a 0%, #1a0a2e 50%, #0a1628 100%)" },
  rooftop:      { label: "å±‹ä¸Š",             gradient: "linear-gradient(180deg, #1a2a4a 0%, #2d4a6e 50%, #1a3a5a 100%)" },
  cafe:         { label: "ã‚«ãƒ•ã‚§",           gradient: "linear-gradient(160deg, #2a1a0e 0%, #3d2a14 50%, #2a1f0a 100%)" },
  meeting_room: { label: "ä¼šè­°å®¤",           gradient: "linear-gradient(160deg, #0e1a1a 0%, #142a2a 50%, #0a1e1e 100%)" },
};

// ã‚·ãƒ¼ãƒ³å®šç¾©ï¼ˆã“ã“ã‚’ç·¨é›†ã—ã¦ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚’å¤‰æ›´ï¼‰
const SCENES = [
  // ===== PROLOGUE =====
  {
    id: "title",
    type: "title",
    title: "æ®‹æ¥­ã®å¤œã«",
    subtitle: "ã€œã‚ã‚‹ç¤¾ä¼šäººã®ç‰©èªžã€œ",
    bg: "office_night",
  },
  {
    id: "s01",
    bg: "office_night",
    char: "narrator",
    text: "æœˆæ›œæ—¥ã®å¤œã€åˆå¾Œ10æ™‚ã€‚\nã‚ªãƒ•ã‚£ã‚¹ã«ã¯ã‚ãªãŸã¨ã‚‚ã†ä¸€äººã ã‘ãŒæ®‹ã£ã¦ã„ãŸã€‚",
  },
  {
    id: "s02",
    bg: "office_night",
    char: "haruka",
    expression: "ðŸ˜”",
    text: "â€¦ã¾ãŸçµ‚é›»ã€é€ƒã—ã¡ã‚ƒã„ãã†ã§ã™ã­ã€‚",
  },
  {
    id: "s03",
    bg: "office_night",
    char: "player",
    text: "ï¼ˆå…ˆè¼©ã®ä¼Šè—¤ã•ã‚“ã ã€‚ã„ã¤ã‚‚é…ãã¾ã§æ®‹ã£ã¦ã„ã‚‹ï¼‰",
  },
  {
    id: "s04",
    bg: "office_night",
    char: "haruka",
    expression: "ðŸ˜…",
    text: "ã‚ã€ã”ã‚ã‚“ãªã•ã„ã€‚ç‹¬ã‚Šè¨€ã§ã—ãŸã€‚\nâ€¦ã‚ãªãŸã‚‚æ®‹æ¥­ã§ã™ã‹ï¼Ÿ",
  },
  // ===== CHOICE 1 =====
  {
    id: "c01",
    type: "choice",
    bg: "office_night",
    text: "ä¼Šè—¤å…ˆè¼©ã«ä½•ã¨ç­”ãˆã¾ã™ã‹ï¼Ÿ",
    choices: [
      { label: "ã€Œã¯ã„ã€ä¼ç”»æ›¸ã®ç· ã‚åˆ‡ã‚ŠãŒâ€¦ã€", next: "s05a" },
      { label: "ã€Œå°‘ã—æ‰‹ä¼ãˆã‚‹ã“ã¨ã‚ã‚Šã¾ã™ã‹ï¼Ÿã€", next: "s05b" },
    ],
  },
  // === BRANCH A ===
  {
    id: "s05a",
    bg: "office_night",
    char: "haruka",
    expression: "ðŸ¤”",
    text: "ä¼ç”»æ›¸ï¼ç§ã‚‚ä»Šãã‚Œã§è©°ã¾ã£ã¦ã¦â€¦\nã©ã‚“ãªå†…å®¹ã§ã™ã‹ï¼Ÿ",
  },
  {
    id: "s06a",
    bg: "office_night",
    char: "player",
    text: "ï¼ˆæ–°å•†å“ã®ãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³æ¡ˆã€‚ã§ã‚‚å…¨ç„¶ã‚¢ã‚¤ãƒ‡ã‚¢ãŒæµ®ã‹ã°ãªã„â€¦ï¼‰",
  },
  {
    id: "s07a",
    bg: "office_night",
    char: "haruka",
    expression: "ðŸ˜Š",
    text: "ã›ã£ã‹ãã ã‹ã‚‰ã€å°‘ã—ä¸€ç·’ã«è€ƒãˆã¾ã—ã‚‡ã†ã‹ã€‚\näºŒäººã®æ–¹ãŒãã£ã¨ã‚¢ã‚¤ãƒ‡ã‚¢å‡ºã‚„ã™ã„ã§ã™ã‚ˆã€‚",
    next: "s08",
  },
  // === BRANCH B ===
  {
    id: "s05b",
    bg: "office_night",
    char: "haruka",
    expression: "ðŸ˜®",
    text: "ãˆã€ã„ã„ã‚“ã§ã™ã‹ï¼Ÿ\nâ€¦å®Ÿã¯ä¼ç”»æ›¸ã§è¡Œãè©°ã¾ã£ã¦ã¦ã€‚",
  },
  {
    id: "s06b",
    bg: "office_night",
    char: "player",
    text: "ï¼ˆã¡ã‚‡ã†ã©è‡ªåˆ†ã‚‚åŒã˜æ¡ˆä»¶ã‚’æŠ±ãˆã¦ã„ãŸã€‚ã‚‚ã—ã‹ã—ãŸã‚‰ç›¸ä¹—åŠ¹æžœãŒã‚ã‚‹ã‹ã‚‚ï¼‰",
    next: "s08",
  },
  // ===== MERGE =====
  {
    id: "s08",
    bg: "cafe",
    char: "narrator",
    text: "äºŒäººã¯ã‚³ãƒ¼ãƒ’ãƒ¼ã‚’è²·ã„ã«è¡Œãã€\næ°—ã¥ã‘ã°æ·±å¤œã¾ã§èªžã‚Šåˆã£ã¦ã„ãŸã€‚",
  },
  {
    id: "s09",
    bg: "cafe",
    char: "haruka",
    expression: "âœ¨",
    text: "ä»•äº‹ã£ã¦ã€ä¸€äººã§ã‚„ã‚ã†ã¨ã™ã‚‹ã‹ã‚‰è¾›ããªã‚‹ã‚“ã§ã™ã‚ˆã­ã€‚\nã‚ãªãŸã¨è©±ã—ã¦ã€ãªã‚“ã‹æ°—ãŒæ¥½ã«ãªã‚Šã¾ã—ãŸã€‚",
  },
  {
    id: "s10",
    bg: "rooftop",
    char: "narrator",
    text: "ç¿Œæ—¥ã®æ˜¼ä¼‘ã¿ã€‚\nç”°ä¸­ãŒå±‹ä¸Šã«å‘¼ã‚“ã§ãã‚ŒãŸã€‚",
  },
  {
    id: "s11",
    bg: "rooftop",
    char: "kenji",
    expression: "ðŸ˜",
    text: "æ˜¨æ—¥ã€ä¼Šè—¤å…ˆè¼©ã¨æ·±å¤œã¾ã§æ®‹ã£ã¦ãŸã£ã¦ï¼Ÿ\nãªã‚“ã‹è‰¯ã„é›°å›²æ°—ã˜ã‚ƒãªã„ã§ã™ã‹ã€‚",
  },
  {
    id: "s12",
    bg: "rooftop",
    char: "player",
    text: "ï¼ˆç”°ä¸­ã¯å†—è«‡ã£ã½ãè¨€ã†ã‘ã©ã€ã‚ãªãŒã¡å¤–ã‚Œã§ã‚‚ãªã„ã‹ã‚‚ã—ã‚Œãªã„ï¼‰",
  },
  // ===== CHOICE 2 =====
  {
    id: "c02",
    type: "choice",
    bg: "rooftop",
    text: "ç”°ä¸­ã«ã©ã†è¿”ã™ï¼Ÿ",
    choices: [
      { label: "ã€ŒãŸã ã®ä»•äº‹ã ã‚ˆã€", next: "s13a" },
      { label: "ã€Œâ€¦ã©ã†æ€ã†ã€æ­£ç›´ï¼Ÿã€", next: "s13b" },
    ],
  },
  // === BRANCH A ===
  {
    id: "s13a",
    bg: "rooftop",
    char: "kenji",
    expression: "ðŸ˜„",
    text: "ãã£ã‹ã€œã€‚ã§ã‚‚ä¼Šè—¤å…ˆè¼©ã€\næ˜¨æ—¥ã‹ã‚‰ä½•ã‹æ¥½ã—ãã†ãªã‚“ã ã‚ˆãªã€‚",
    next: "s14",
  },
  // === BRANCH B ===
  {
    id: "s13b",
    bg: "rooftop",
    char: "kenji",
    expression: "ðŸ¤",
    text: "æ­£ç›´ã«è¨€ã†ï¼ã¡ã‚ƒã‚“ã¨å‘ãåˆã£ãŸæ–¹ãŒã„ã„ã€‚\nä»•äº‹ã‚‚æ‹æ„›ã‚‚ã€é€ƒã’ã¦ãŸã‚‰ä½•ã‚‚å¤‰ã‚ã‚‰ãªã„ã£ã¦ã€‚",
    next: "s14",
  },
  {
    id: "s14",
    bg: "meeting_room",
    char: "narrator",
    text: "ãã®å¤œã€ãƒ—ãƒ¬ã‚¼ãƒ³ã®æœ€çµ‚ç¢ºèªã‚’ã—ã¦ã„ã‚‹ã¨\nä¼Šè—¤å…ˆè¼©ã‹ã‚‰é€£çµ¡ãŒå…¥ã£ãŸã€‚",
  },
  {
    id: "s15",
    bg: "meeting_room",
    char: "haruka",
    expression: "ðŸ˜¤",
    text: "éƒ¨é•·ãŒæ€¥ã«æ–¹é‡å¤‰æ›´ã£ã¦è¨€ã„å‡ºã—ã¦â€¦ï¼\næ˜Žæ—¥ã®æœã‚¤ãƒã¾ã§ã«ä¿®æ­£æ¡ˆãŒå¿…è¦ãªã‚“ã§ã™ã€‚",
  },
  {
    id: "s16",
    bg: "meeting_room",
    char: "player",
    text: "ï¼ˆã“ã‚Œã¯å¤§å¤‰ã ã€‚ã§ã‚‚ã€ä¸€ç·’ã«ä¹—ã‚Šè¶Šãˆã‚‰ã‚Œã‚‹æ°—ãŒã—ãŸï¼‰",
  },
  {
    id: "s17",
    bg: "office_night",
    char: "narrator",
    text: "äºŒäººã¯æ·±å¤œã¾ã§ä½œæ¥­ã‚’ç¶šã‘ãŸã€‚\nã‚³ãƒ¼ãƒ’ãƒ¼ã‚«ãƒƒãƒ—ãŒä¸‰ã¤ç©ºã«ãªã‚‹é ƒã€ã‚ˆã†ã‚„ãå®Œæˆã—ãŸã€‚",
  },
  {
    id: "s18",
    bg: "office_night",
    char: "haruka",
    expression: "ðŸ˜Œ",
    text: "â€¦ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚\nã‚ãªãŸãŒã„ãªã‹ã£ãŸã‚‰ã€æœ¬å½“ã«è©°ã‚“ã§ã¾ã—ãŸã€‚",
  },
  {
    id: "s19",
    bg: "office_night",
    char: "player",
    text: "ï¼ˆå…ˆè¼©ã®æ¨ªé¡”ã«ã€ãƒ¢ãƒ‹ã‚¿ãƒ¼ã®å…‰ãŒæŸ”ã‚‰ã‹ãå½“ãŸã£ã¦ã„ãŸï¼‰",
  },
  // ===== FINAL CHOICE =====
  {
    id: "c03",
    type: "choice",
    bg: "office_night",
    text: "ã“ã®æ°—æŒã¡ã€ã©ã†ã™ã‚‹ï¼Ÿ",
    choices: [
      { label: "ã€Œã¾ãŸä¸€ç·’ã«ä»•äº‹ã—ã¾ã—ã‚‡ã†ã€", next: "end_a" },
      { label: "ã€Œä»Šåº¦ã€ã¡ã‚ƒã‚“ã¨ãŠç¤¼ã•ã›ã¦ãã ã•ã„ã€", next: "end_b" },
    ],
  },
  // ===== ENDINGS =====
  {
    id: "end_a",
    bg: "office_night",
    char: "haruka",
    expression: "ðŸ˜Š",
    text: "â€¦ã¯ã„ã€ãœã²ã€‚\nã‚ãªãŸã¨ä»•äº‹ã™ã‚‹ã¨ã€ãªãœã‹è‡ªä¿¡ãŒæŒã¦ã‚‹ã‚“ã§ã™ã€‚",
  },
  {
    id: "end_a2",
    type: "ending",
    bg: "office_night",
    title: "ENDING A",
    subtitle: "ã€Œä»•äº‹ä»²é–“ã€",
    description: "äºŒäººã¯æœ€é«˜ã®ä»•äº‹ä»²é–“ã«ãªã£ãŸã€‚\nãã®å…ˆã«ã‚ã‚‹ã‚‚ã®ã¯ã€ã¾ã èª°ã«ã‚‚åˆ†ã‹ã‚‰ãªã„ã€‚",
  },
  {
    id: "end_b",
    bg: "office_night",
    char: "haruka",
    expression: "ðŸ˜³",
    text: "ãŠç¤¼â€¦ï¼Ÿ\nâ€¦ã„ã€ã„ã„ã§ã™ã‚ˆåˆ¥ã«ã€‚\nâ€¦ã§ã‚‚ã€å¬‰ã—ã„ã§ã™ã€‚",
  },
  {
    id: "end_b2",
    type: "ending",
    bg: "office_night",
    title: "ENDING B",
    subtitle: "ã€Œæ®‹æ¥­ã®å¾Œã§ã€",
    description: "é€±æœ«ã®ã‚«ãƒ•ã‚§ã§ã€äºŒäººã¯ä»•äº‹ã®è©±ã‚ˆã‚Š\nãšã£ã¨å¤§åˆ‡ãªã“ã¨ã‚’è©±ã—ãŸã€‚",
  },
];

// ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆè‡ªå‹•ç”Ÿæˆï¼‰
const SCENE_MAP = {};
SCENES.forEach((s, i) => {
  SCENE_MAP[s.id] = i;
});

// ===========================
// EXPORTS
// ===========================
if (typeof module !== 'undefined') {
  module.exports = { CHARACTERS, BACKGROUNDS, SCENES, SCENE_MAP };
}
